# ğŸ³ AoC 2025 Day 5: å¨æˆ¿é£Ÿæç®¡ç†ç³»ç»Ÿ

## ğŸ“ é—®é¢˜æè¿° (Problem)

å¨æˆ¿æœ‰ä¸€ä¸ªæ–°çš„åº“å­˜ç®¡ç†ç³»ç»Ÿï¼Œç”¨æ¥åˆ¤æ–­é£Ÿææ˜¯å¦æ–°é²œã€‚

æ•°æ®åº“åŒ…å«ï¼š
1. **æ–°é²œIDèŒƒå›´**ï¼ˆä¾‹å¦‚ `3-5` è¡¨ç¤º ID 3,4,5 éƒ½æ˜¯æ–°é²œçš„ï¼‰
2. ç©ºè¡Œåˆ†éš”
3. **å¾…æ£€æŸ¥çš„é£ŸæIDåˆ—è¡¨**

èŒƒå›´æ˜¯**åŒ…å«ä¸¤ç«¯**çš„ï¼Œä¸”å¯ä»¥**é‡å **ã€‚

**æŒ‘æˆ˜ä»»åŠ¡ï¼š**
1. **Part 1:** å¾…æ£€æŸ¥çš„é£Ÿæä¸­ï¼Œæœ‰å¤šå°‘ä¸ªæ˜¯æ–°é²œçš„ï¼Ÿ
2. **Part 2:** æ‰€æœ‰èŒƒå›´æ€»å…±è¦†ç›–äº†å¤šå°‘ä¸ªä¸åŒçš„IDï¼Ÿ

---

## ğŸ¨ å¯è§†åŒ– (Visualization)

```text
èŒƒå›´:  3-5, 10-14, 16-20, 12-18

æ•°è½´:
0----3==5----10======14--16======20----25

åˆå¹¶å:
0----3==5----10=============20----25
     [3-5]   [    10-20    ]

è¦†ç›–çš„ID: 3,4,5 + 10,11,12,13,14,15,16,17,18,19,20
æ€»æ•°: 3 + 11 = 14
```

---

## ğŸ’¡ è§£é¢˜æ€è·¯ (Approach)

### Part 1: æ£€æŸ¥æ¯ä¸ªIDæ˜¯å¦åœ¨èŒƒå›´å†…

æœ€ç®€å•çš„æ–¹æ³•ï¼šå¯¹æ¯ä¸ªå¾…æ£€æŸ¥çš„IDï¼Œéå†æ‰€æœ‰èŒƒå›´çœ‹æ˜¯å¦åŒ¹é…ã€‚

**ä¼˜åŒ–æ–¹æ³•ï¼šåˆå¹¶èŒƒå›´ + äºŒåˆ†æŸ¥æ‰¾**

```python
# 1. åˆå¹¶é‡å çš„èŒƒå›´
def merge_ranges(ranges):
    sorted_ranges = sorted(ranges)  # æŒ‰èµ·ç‚¹æ’åº
    merged = [sorted_ranges[0]]

    for start, end in sorted_ranges[1:]:
        last_start, last_end = merged[-1]

        if start <= last_end + 1:  # é‡å æˆ–ç›¸é‚»
            merged[-1] = (last_start, max(last_end, end))
        else:
            merged.append((start, end))

    return merged

# 2. äºŒåˆ†æŸ¥æ‰¾åˆ¤æ–­IDæ˜¯å¦æ–°é²œ
def is_fresh(id, merged_ranges):
    # åœ¨å·²æ’åºçš„èŒƒå›´ä¸­äºŒåˆ†æŸ¥æ‰¾
    left, right = 0, len(merged_ranges) - 1
    while left <= right:
        mid = (left + right) // 2
        start, end = merged_ranges[mid]
        if start <= id <= end:
            return True
        elif id < start:
            right = mid - 1
        else:
            left = mid + 1
    return False
```

---

### Part 2: ç»Ÿè®¡è¦†ç›–çš„æ€»IDæ•°

> ğŸ”‘ **æ ¸å¿ƒæ€æƒ³ï¼š**
> åˆå¹¶æ‰€æœ‰é‡å èŒƒå›´åï¼Œæ¯ä¸ªèŒƒå›´è¦†ç›–çš„IDæ•° = `end - start + 1`

```python
def solve_part2(ranges):
    merged = merge_ranges(ranges)

    total = 0
    for start, end in merged:
        total += end - start + 1

    return total
```

**ä¸ºä»€ä¹ˆè¦åˆå¹¶ï¼Ÿ**

å¦‚æœä¸åˆå¹¶ï¼Œé‡å éƒ¨åˆ†ä¼šè¢«é‡å¤è®¡ç®—ï¼

```text
èŒƒå›´ 10-14 å’Œ 12-18:
- ä¸åˆå¹¶: (14-10+1) + (18-12+1) = 5 + 7 = 12 âŒ
- åˆå¹¶å: 10-18 â†’ (18-10+1) = 9 âœ…

é‡å éƒ¨åˆ† 12,13,14 åªåº”è¯¥ç®—ä¸€æ¬¡ï¼
```

---

## ğŸ“Š ç¤ºä¾‹è§£æ (Example Walkthrough)

**è¾“å…¥èŒƒå›´:** `3-5, 10-14, 16-20, 12-18`

**Step 1: æ’åº**
```
3-5, 10-14, 12-18, 16-20
```

**Step 2: åˆå¹¶**
```
3-5   â†’ ä¿ç•™ [3-5]
10-14 â†’ æ–°èŒƒå›´ [3-5, 10-14]
12-18 â†’ ä¸10-14é‡å ï¼Œåˆå¹¶ä¸º10-18 [3-5, 10-18]
16-20 â†’ ä¸10-18é‡å ï¼Œåˆå¹¶ä¸º10-20 [3-5, 10-20]
```

**Step 3: è®¡ç®—**
```
[3-5]:   5 - 3 + 1 = 3
[10-20]: 20 - 10 + 1 = 11
æ€»è®¡: 3 + 11 = 14 âœ…
```

---

## ğŸš€ å¤æ‚åº¦åˆ†æ

| Part | æ—¶é—´å¤æ‚åº¦ | è¯´æ˜ |
|------|-----------|------|
| 1 | O(N log N + M log N) | N=èŒƒå›´æ•°, M=å¾…æ£€æŸ¥IDæ•° |
| 2 | O(N log N) | æ’åº + åˆå¹¶ |

**ä¼˜åŒ–æ•ˆæœï¼š**
- æš´åŠ›æ³• Part 1: O(M Ã— N)
- ä¼˜åŒ–å: O(M log N) ï¼ˆäºŒåˆ†æŸ¥æ‰¾ï¼‰

---

## ğŸ’» å…³é”®ä»£ç 

```python
def merge_ranges(ranges):
    if not ranges:
        return []

    sorted_ranges = sorted(ranges)
    merged = [sorted_ranges[0]]

    for start, end in sorted_ranges[1:]:
        last_start, last_end = merged[-1]

        # é‡å æˆ–ç›¸é‚»å°±åˆå¹¶
        if start <= last_end + 1:
            merged[-1] = (last_start, max(last_end, end))
        else:
            merged.append((start, end))

    return merged
```

---

## ğŸ“ æ€»ç»“

| æ¦‚å¿µ | Part 1 | Part 2 |
|------|--------|--------|
| é—®çš„æ˜¯ | ç‰¹å®šIDæ˜¯å¦æ–°é²œ | æ€»å…±å¤šå°‘IDæ–°é²œ |
| æ ¸å¿ƒæŠ€å·§ | åˆå¹¶èŒƒå›´ + äºŒåˆ†æŸ¥æ‰¾ | åˆå¹¶èŒƒå›´ + æ±‚å’Œ |
| å…³é”®å…¬å¼ | - | `sum(end - start + 1)` |

**å¿ƒå¾—ï¼š**
åŒºé—´åˆå¹¶æ˜¯ä¸€ä¸ªç»å…¸é—®é¢˜ï¼å…³é”®ç‚¹ï¼š
1. å…ˆæŒ‰èµ·ç‚¹æ’åº
2. åˆ¤æ–­é‡å æ¡ä»¶ï¼š`start <= last_end + 1`ï¼ˆ+1å¤„ç†ç›¸é‚»æƒ…å†µï¼‰
3. åˆå¹¶æ—¶å– `max(last_end, end)`

ç±»ä¼¼é—®é¢˜ï¼šä¼šè®®å®¤å®‰æ’ã€æ—¥ç¨‹å†²çªæ£€æµ‹ã€IPåœ°å€æ®µåˆå¹¶ã€‚

---

ğŸ”— **ä»£ç ä»“åº“:** [GitHub Link](https://github.com/JunjieAraoXiong/advant-of-code-2025)
